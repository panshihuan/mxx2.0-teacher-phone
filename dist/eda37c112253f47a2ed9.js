webpackJsonp([2],{11:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(47),i=r(o);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},18:function(e,t,n){var r=n(21),o=n(1)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},34:function(e,t,n){n(59),n(60),n(61),n(46),e.exports=n(3).Promise},35:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},36:function(e,t,n){var r=n(22),o=n(39),i=n(38),a=n(8),u=n(58),c=n(45),l={},s={},t=e.exports=function(e,t,n,f,d){var p,h,v,m,_=d?function(){return e}:c(e),y=r(n,f,t?2:1),E=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(i(_)){for(p=u(e.length);p>E;E++)if(m=t?y(a(h=e[E])[0],h[1]):y(e[E]),m===l||m===s)return m}else for(v=_.call(e);!(h=v.next()).done;)if(m=o(v,y,h.value,t),m===l||m===s)return m};t.BREAK=l,t.RETURN=s},38:function(e,t,n){var r=n(23),o=n(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},39:function(e,t,n){var r=n(8);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},40:function(e,t,n){var r=n(1)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},41:function(e,t,n){var r=n(6),o=n(29).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,c="process"==n(21)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(i){var s=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),n=function(){f.data=s=!s}}else if(u&&u.resolve){var d=u.resolve();n=function(){d.then(l)}}else n=function(){o.call(r,l)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},42:function(e,t,n){var r=n(37);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},43:function(e,t,n){"use strict";var r=n(6),o=n(3),i=n(32),a=n(31),u=n(1)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[u]&&i.f(t,u,{configurable:!0,get:function(){return this}})}},44:function(e,t,n){var r=n(8),o=n(27),i=n(1)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},45:function(e,t,n){var r=n(18),o=n(1)("iterator"),i=n(23);e.exports=n(3).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},46:function(e,t,n){"use strict";var r,o,i,a=n(54),u=n(6),c=n(22),l=n(18),s=n(28),f=n(50),d=n(27),p=n(35),h=n(36),v=n(44),m=n(29).set,_=n(41)(),y="Promise",E=u.TypeError,b=u.process,g=u[y],b=u.process,k="process"==l(b),A=function(){},N=!!function(){try{var e=g.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(A,A)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t}catch(e){}}(),w=function(e,t){return e===t||e===g&&t===i},x=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},j=function(e){return w(g,e)?new C(e):new o(e)},C=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw E("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},T=function(e){try{e()}catch(e){return{error:e}}},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{a?(o||(2==e._h&&I(e),e._h=1),a===!0?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===t.promise?c(E("Promise-chain cycle")):(i=x(n))?i.call(n,u,c):u(n)):c(r)}catch(e){c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){m.call(u,function(){var t,n,r,o=e._v;if(M(e)&&(t=T(function(){k?b.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||M(e)?2:1),e._a=void 0,t)throw t.error})},M=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!M(t.promise))return!1;return!0},I=function(e){m.call(u,function(){var t;k?b.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},S=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},B=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=x(e))?_(function(){var r={_w:n,_d:!1};try{t.call(e,c(B,r,1),c(S,r,1))}catch(e){S.call(r,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){S.call({_w:n,_d:!1},e)}}};N||(g=function(e){p(this,g,y,"_h"),d(e),r.call(this);try{e(c(B,this,1),c(S,this,1))}catch(e){S.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(42)(g.prototype,{then:function(e,t){var n=j(v(this,g));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),C=function(){var e=new r;this.promise=e,this.resolve=c(B,e,1),this.reject=c(S,e,1)}),s(s.G+s.W+s.F*!N,{Promise:g}),n(55)(g,y),n(43)(y),i=n(3)[y],s(s.S+s.F*!N,y,{reject:function(e){var t=j(this),n=t.reject;return n(e),t.promise}}),s(s.S+s.F*(a||!N),y,{resolve:function(e){if(e instanceof g&&w(e.constructor,this))return e;var t=j(this),n=t.resolve;return n(e),t.promise}}),s(s.S+s.F*!(N&&n(40)(function(e){g.all(e).catch(A)})),y,{all:function(e){var t=this,n=j(t),r=n.resolve,o=n.reject,i=T(function(){var n=[],i=0,a=1;h(e,!1,function(e){var u=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[u]=e,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=j(t),r=n.reject,o=T(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},48:function(e,t,n){e.exports={default:n(34),__esModule:!0}},69:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(70),i=r(o);t.default=i.default},70:function(e,t){"use strict";function n(e){return d(r(f(e),e.length*h))}function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,o=-1732584194,s=271733878,f=0;f<e.length;f+=16){var d=n,p=r,h=o,v=s;n=i(n,r,o,s,e[f+0],7,-680876936),s=i(s,n,r,o,e[f+1],12,-389564586),o=i(o,s,n,r,e[f+2],17,606105819),r=i(r,o,s,n,e[f+3],22,-1044525330),n=i(n,r,o,s,e[f+4],7,-176418897),s=i(s,n,r,o,e[f+5],12,1200080426),o=i(o,s,n,r,e[f+6],17,-1473231341),r=i(r,o,s,n,e[f+7],22,-45705983),n=i(n,r,o,s,e[f+8],7,1770035416),s=i(s,n,r,o,e[f+9],12,-1958414417),o=i(o,s,n,r,e[f+10],17,-42063),r=i(r,o,s,n,e[f+11],22,-1990404162),n=i(n,r,o,s,e[f+12],7,1804603682),s=i(s,n,r,o,e[f+13],12,-40341101),o=i(o,s,n,r,e[f+14],17,-1502002290),r=i(r,o,s,n,e[f+15],22,1236535329),n=a(n,r,o,s,e[f+1],5,-165796510),s=a(s,n,r,o,e[f+6],9,-1069501632),o=a(o,s,n,r,e[f+11],14,643717713),r=a(r,o,s,n,e[f+0],20,-373897302),n=a(n,r,o,s,e[f+5],5,-701558691),s=a(s,n,r,o,e[f+10],9,38016083),o=a(o,s,n,r,e[f+15],14,-660478335),r=a(r,o,s,n,e[f+4],20,-405537848),n=a(n,r,o,s,e[f+9],5,568446438),s=a(s,n,r,o,e[f+14],9,-1019803690),o=a(o,s,n,r,e[f+3],14,-187363961),r=a(r,o,s,n,e[f+8],20,1163531501),n=a(n,r,o,s,e[f+13],5,-1444681467),s=a(s,n,r,o,e[f+2],9,-51403784),o=a(o,s,n,r,e[f+7],14,1735328473),r=a(r,o,s,n,e[f+12],20,-1926607734),n=u(n,r,o,s,e[f+5],4,-378558),s=u(s,n,r,o,e[f+8],11,-2022574463),o=u(o,s,n,r,e[f+11],16,1839030562),r=u(r,o,s,n,e[f+14],23,-35309556),n=u(n,r,o,s,e[f+1],4,-1530992060),s=u(s,n,r,o,e[f+4],11,1272893353),o=u(o,s,n,r,e[f+7],16,-155497632),r=u(r,o,s,n,e[f+10],23,-1094730640),n=u(n,r,o,s,e[f+13],4,681279174),s=u(s,n,r,o,e[f+0],11,-358537222),o=u(o,s,n,r,e[f+3],16,-722521979),r=u(r,o,s,n,e[f+6],23,76029189),n=u(n,r,o,s,e[f+9],4,-640364487),s=u(s,n,r,o,e[f+12],11,-421815835),o=u(o,s,n,r,e[f+15],16,530742520),r=u(r,o,s,n,e[f+2],23,-995338651),n=c(n,r,o,s,e[f+0],6,-198630844),s=c(s,n,r,o,e[f+7],10,1126891415),o=c(o,s,n,r,e[f+14],15,-1416354905),r=c(r,o,s,n,e[f+5],21,-57434055),n=c(n,r,o,s,e[f+12],6,1700485571),s=c(s,n,r,o,e[f+3],10,-1894986606),o=c(o,s,n,r,e[f+10],15,-1051523),r=c(r,o,s,n,e[f+1],21,-2054922799),n=c(n,r,o,s,e[f+8],6,1873313359),s=c(s,n,r,o,e[f+15],10,-30611744),o=c(o,s,n,r,e[f+6],15,-1560198380),r=c(r,o,s,n,e[f+13],21,1309151649),n=c(n,r,o,s,e[f+4],6,-145523070),s=c(s,n,r,o,e[f+11],10,-1120210379),o=c(o,s,n,r,e[f+2],15,718787259),r=c(r,o,s,n,e[f+9],21,-343485551),n=l(n,d),r=l(r,p),o=l(o,h),s=l(s,v)}return Array(n,r,o,s)}function o(e,t,n,r,o,i){return l(s(l(l(t,e),l(r,i)),o),n)}function i(e,t,n,r,i,a,u){return o(t&n|~t&r,e,t,i,a,u)}function a(e,t,n,r,i,a,u){return o(t&r|n&~r,e,t,i,a,u)}function u(e,t,n,r,i,a,u){return o(t^n^r,e,t,i,a,u)}function c(e,t,n,r,i,a,u){return o(n^(t|~r),e,t,i,a,u)}function l(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function s(e,t){return e<<t|e>>>32-t}function f(e){for(var t=Array(),n=(1<<h)-1,r=0;r<e.length*h;r+=h)t[r>>5]|=(e.charCodeAt(r/h)&n)<<r%32;return t}function d(e){for(var t=p?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}Object.defineProperty(t,"__esModule",{value:!0});var p=0,h=8;t.default=n},102:255,215:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{type:f,payload:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1],n=h[t.type];return n?n(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.doubleAsync=t.COUNTER_DOUBLE_ASYNC=t.COUNTER_INCREMENT=void 0;var a,u=n(11),c=r(u),l=n(48),s=r(l);t.increment=o,t.default=i;var f=t.COUNTER_INCREMENT="COUNTER_INCREMENT",d=t.COUNTER_DOUBLE_ASYNC="COUNTER_DOUBLE_ASYNC",p=t.doubleAsync=function(){return function(e,t){return new s.default(function(n){setTimeout(function(){e({type:d,payload:t().counter}),n()},200)})}},h=(t.actions={increment:o,doubleAsync:p},a={},(0,c.default)(a,f,function(e,t){return e+t.payload}),(0,c.default)(a,d,function(e,t){return 2*e}),a),v=0},484:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=r(o),a=n(12),u=r(a),c=n(13),l=r(c),s=n(14),f=r(s),d=n(16),p=r(d),h=n(15),v=r(h),m=n(2),_=r(m),y=n(19),E=(r(y),n(9),n(69)),b=r(E);n(102);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state={roles:1,error:!1,errorInfo:"请填写正确的学生账号和密码!",getStudentsList:[]},n.goBack=n.goBack.bind(n),n.sure=n.sure.bind(n),n.onRole=n.onRole.bind(n),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t="errorInfo";return t+=this.state.error?" show":" hide",_.default.createElement("div",{style:{marginTop:"15px"},className:"parentAlter mTp"},_.default.createElement("div",{className:"topBar"},_.default.createElement("div",{className:"topBar-content"},_.default.createElement("div",{className:"topBar-content-main"},"绑定学生")),_.default.createElement("div",{onClick:this.goBack,className:"topBar-left"},_.default.createElement("span",null,"<返回")),_.default.createElement("div",{className:"topBar-right"})),_.default.createElement("div",{className:"parentAlter-header"},_.default.createElement("section",null,_.default.createElement("input",{ref:"account",type:"text",required:!0,name:"account",placeholder:"填写学生账号"})),_.default.createElement("section",null,_.default.createElement("input",{ref:"psw",type:"password",required:!0,name:"psw",placeholder:"填写学生登录密码验证"}))),_.default.createElement("p",{style:{marginBottom:"10px"},className:t},this.state.errorInfo),_.default.createElement("main",{className:"parentAlter-main"},_.default.createElement("section",{onClick:function(){return e.onRole(1)}},_.default.createElement("input",{type:"radio",name:"role"}),_.default.createElement("p",null,"我是爸爸")),_.default.createElement("section",{onClick:function(){return e.onRole(2)}},_.default.createElement("input",{type:"radio",name:"role"}),_.default.createElement("p",null,"我是妈妈")),_.default.createElement("section",{onClick:function(){return e.onRole(3)}},_.default.createElement("input",{type:"radio",name:"role"}),_.default.createElement("p",null,"我是爷爷")),_.default.createElement("section",{onClick:function(){return e.onRole(4)}},_.default.createElement("input",{type:"radio",name:"role"}),_.default.createElement("p",null,"我是奶奶")),_.default.createElement("section",{onClick:function(){return e.onRole(5)}},_.default.createElement("input",{type:"radio",name:"role"}),_.default.createElement("p",null,"其他"))),_.default.createElement("footer",{className:"parentAlter-footer"},_.default.createElement("button",{onClick:this.sure},"确认绑定")))}},{key:"goBack",value:function(){history.back()}},{key:"onRole",value:function(e){this.setState({roles:e})}},{key:"sure",value:function(){var e=this.refs.account.value,t=this.refs.psw.value,n=(0,b.default)(t).split("");n[5]=t.charAt(0),n[10]=t.charAt(1),n[15]=t.charAt(2);var r={password:n.join("")};return this.refs.account.value&&this.refs.psw.value?(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)?r.email=e:/^1[3|4|5|7|8][0-9]{9}$/.test(e)?r.phone=e:r.account=e,void fetch("http://115.29.177.200:8080/get/student/id?token="+this.props.tokens,{method:"POST",headers:{"Content-Type":"application/json"},body:(0,i.default)(r)}).then(function(e){return e.json()}).then(function(e){if(0==e.status){var t={parentId:this.props.parentId,studentId:e.data.studentId,role:this.state.roles};fetch("http://115.29.177.200:8080/parent/student/relation?token="+this.props.tokens,{method:"POST",headers:{"Content-Type":"application/json"},body:(0,i.default)(t)}).then(function(e){return e.json()}).then(function(e){0==e.status?(alert("绑定成功!"),this.context.router.push("/students")):alert(e.info)}.bind(this))}else this.setState({error:!0,errorInfo:e.info})}.bind(this))):void this.setState({error:!0})}},{key:"goBack",value:function(){history.back()}}]),t}(_.default.Component);t.default=g,g.defaultProps={tokens:localStorage.getItem("tokens2"),parentId:JSON.parse(localStorage.getItem("parentInfo"))?JSON.parse(localStorage.getItem("parentInfo")).parentId:null},g.contextTypes={router:_.default.PropTypes.object}},485:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),i=n(215),a=n(484),u=r(a),c={increment:function(){return(0,i.increment)(1)},doubleAsync:i.doubleAsync},l=function(e){return{counter:e.counter}};t.default=(0,o.connect)(l,c)(u.default)}});